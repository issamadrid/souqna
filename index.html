<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Souqna - Global Marketplace | Ø³ÙˆÙ‚Ù†Ø§</title>
    <meta name="description" content="Global marketplace supporting 50+ countries, 10 languages, and worldwide shipping">
    <meta name="theme-color" content="#2563eb">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        * { 
            font-family: 'Inter', 'Tajawal', sans-serif; 
            box-sizing: border-box;
        }
        [dir="rtl"] * { font-family: 'Tajawal', 'Inter', sans-serif; }
        
        body { 
            background: #f8fafc; 
            color: #1e293b;
            line-height: 1.6;
        }
        
        /* High Contrast Colors - No more black on dark! */
        .primary-blue { color: #2563eb; }
        .bg-primary-blue { background-color: #2563eb; }
        .primary-dark { color: #1e40af; }
        .bg-primary-dark { background-color: #1e40af; }
        
        /* White text on dark backgrounds only */
        .text-on-dark { color: #ffffff; }
        .bg-dark { background-color: #1e293b; }
        
        /* Improved contrast cards */
        .card {
            background: #ffffff;
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .card:hover {
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            border-color: #3b82f6;
        }
        
        /* Admin Dashboard Specific Styles */
        .admin-sidebar {
            background: linear-gradient(180deg, #1e40af 0%, #1e3a8a 100%);
            color: white;
        }
        
        .admin-nav-item {
            padding: 12px 16px;
            margin: 4px 8px;
            border-radius: 8px;
            color: #bfdbfe;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .admin-nav-item:hover, .admin-nav-item.active {
            background: rgba(255,255,255,0.15);
            color: #ffffff;
        }
        
        .admin-nav-item i {
            width: 24px;
            text-align: center;
            font-size: 18px;
        }
        
        .stat-card {
            background: white;
            border-radius: 16px;
            padding: 24px;
            border-left: 4px solid #3b82f6;
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1);
        }
        
        .stat-card.purple { border-left-color: #8b5cf6; }
        .stat-card.green { border-left-color: #10b981; }
        .stat-card.orange { border-left-color: #f59e0b; }
        .stat-card.red { border-left-color: #ef4444; }
        
        /* Language & Currency Selectors - High Visibility */
        .selector-btn {
            background: #ffffff;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            padding: 10px 16px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
            color: #1e293b;
            transition: all 0.2s;
            min-width: 140px;
        }
        
        .selector-btn:hover {
            border-color: #3b82f6;
            background: #eff6ff;
        }
        
        .selector-btn .flag {
            font-size: 24px;
        }
        
        .selector-btn .code {
            color: #2563eb;
            font-weight: 700;
            font-size: 14px;
        }
        
        /* Modal Improvements */
        .modal-overlay {
            background: rgba(0,0,0,0.6);
            backdrop-filter: blur(4px);
        }
        
        .modal-content {
            background: #ffffff;
            border-radius: 20px;
            box-shadow: 0 25px 50px -12px rgba(0,0,0,0.25);
        }
        
        .modal-header {
            background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
            color: white;
            padding: 20px 24px;
            border-radius: 20px 20px 0 0;
        }
        
        /* Language Options Grid */
        .lang-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 12px;
            padding: 20px;
        }
        
        .lang-option {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s;
            background: white;
        }
        
        .lang-option:hover {
            border-color: #3b82f6;
            background: #eff6ff;
            transform: translateY(-2px);
        }
        
        .lang-option.selected {
            border-color: #2563eb;
            background: #dbeafe;
        }
        
        .lang-option .flag {
            font-size: 32px;
        }
        
        .lang-option .name {
            font-weight: 700;
            color: #1e293b;
            font-size: 16px;
        }
        
        .lang-option .native {
            color: #64748b;
            font-size: 13px;
        }
        
        /* Currency Grid */
        .currency-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 12px;
            padding: 20px;
        }
        
        .currency-option {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            padding: 20px 16px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s;
            background: white;
        }
        
        .currency-option:hover {
            border-color: #3b82f6;
            background: #eff6ff;
        }
        
        .currency-option.selected {
            border-color: #2563eb;
            background: #dbeafe;
        }
        
        .currency-option .flag {
            font-size: 36px;
        }
        
        .currency-option .code {
            font-weight: 800;
            color: #2563eb;
            font-size: 20px;
        }
        
        .currency-option .name {
            color: #64748b;
            font-size: 12px;
            text-align: center;
        }
        
        /* Product Cards */
        .product-card {
            background: white;
            border-radius: 16px;
            overflow: hidden;
            border: 1px solid #e2e8f0;
            transition: all 0.3s ease;
        }
        
        .product-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1);
            border-color: #3b82f6;
        }
        
        /* Buttons with proper contrast */
        .btn-primary {
            background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
            color: white;
            padding: 12px 24px;
            border-radius: 10px;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(37,99,235,0.3);
        }
        
        .btn-secondary {
            background: #f1f5f9;
            color: #475569;
            padding: 12px 24px;
            border-radius: 10px;
            font-weight: 600;
            border: 2px solid #e2e8f0;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .btn-secondary:hover {
            background: #e2e8f0;
            border-color: #cbd5e1;
        }
        
        /* Tables for Admin */
        .data-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
        }
        
        .data-table th {
            background: #f8fafc;
            color: #475569;
            font-weight: 700;
            text-align: left;
            padding: 16px;
            border-bottom: 2px solid #e2e8f0;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .data-table td {
            padding: 16px;
            border-bottom: 1px solid #e2e8f0;
            color: #1e293b;
        }
        
        .data-table tr:hover td {
            background: #f8fafc;
        }
        
        /* Status Badges */
        .badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
        }
        
        .badge-success {
            background: #dcfce7;
            color: #166534;
        }
        
        .badge-warning {
            background: #fef3c7;
            color: #92400e;
        }
        
        .badge-danger {
            background: #fee2e2;
            color: #991b1b;
        }
        
        .badge-info {
            background: #dbeafe;
            color: #1e40af;
        }
        
        /* Charts placeholder */
        .chart-container {
            background: white;
            border-radius: 16px;
            padding: 24px;
            border: 1px solid #e2e8f0;
        }
        
        /* Toast Notifications */
        .toast {
            position: fixed;
            top: 24px;
            right: 24px;
            background: white;
            color: #1e293b;
            padding: 16px 24px;
            border-radius: 12px;
            box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            gap: 12px;
            z-index: 9999;
            transform: translateX(400px);
            transition: transform 0.3s ease;
            border-left: 4px solid #10b981;
        }
        
        .toast.show {
            transform: translateX(0);
        }
        
        .toast-icon {
            width: 40px;
            height: 40px;
            background: #dcfce7;
            color: #166534;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }
        
        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .animate-fade-in {
            animation: fadeIn 0.4s ease;
        }
        
        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f5f9;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #94a3b8;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #64748b;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .lang-grid, .currency-grid {
                grid-template-columns: 1fr;
            }
            
            .admin-sidebar {
                position: fixed;
                bottom: 0;
                left: 0;
                right: 0;
                top: auto;
                height: auto;
                flex-direction: row;
                padding: 8px;
                z-index: 100;
            }
        }
    </style>
</head>
<body class="min-h-screen">
    <!-- App Container -->
    <div id="app">
        <!-- Content loaded dynamically -->
    </div>

    <!-- Toast Container -->
    <div id="toastContainer"></div>

    <script>
        // ==================== CONFIGURATION ====================
        
        const CONFIG = {
            languages: {
                ar: { name: 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©', native: 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©', flag: 'ğŸ‡¸ğŸ‡¦', dir: 'rtl', locale: 'ar-SA' },
                en: { name: 'English', native: 'English', flag: 'ğŸ‡¬ğŸ‡§', dir: 'ltr', locale: 'en-US' },
                fr: { name: 'FranÃ§ais', native: 'FranÃ§ais', flag: 'ğŸ‡«ğŸ‡·', dir: 'ltr', locale: 'fr-FR' },
                es: { name: 'EspaÃ±ol', native: 'EspaÃ±ol', flag: 'ğŸ‡ªğŸ‡¸', dir: 'ltr', locale: 'es-ES' },
                tr: { name: 'TÃ¼rkÃ§e', native: 'TÃ¼rkÃ§e', flag: 'ğŸ‡¹ğŸ‡·', dir: 'ltr', locale: 'tr-TR' },
                de: { name: 'Deutsch', native: 'Deutsch', flag: 'ğŸ‡©ğŸ‡ª', dir: 'ltr', locale: 'de-DE' }
            },
            
            currencies: {
                USD: { name: 'US Dollar', symbol: '$', flag: 'ğŸ‡ºğŸ‡¸', rate: 1 },
                EUR: { name: 'Euro', symbol: 'â‚¬', flag: 'ğŸ‡ªğŸ‡º', rate: 0.92 },
                DZD: { name: 'Algerian Dinar', symbol: 'Ø¯.Ø¬', flag: 'ğŸ‡©ğŸ‡¿', rate: 135.5 },
                SAR: { name: 'Saudi Riyal', symbol: 'Ø±.Ø³', flag: 'ğŸ‡¸ğŸ‡¦', rate: 3.75 },
                AED: { name: 'UAE Dirham', symbol: 'Ø¯.Ø¥', flag: 'ğŸ‡¦ğŸ‡ª', rate: 3.67 },
                MAD: { name: 'Moroccan Dirham', symbol: 'Ø¯.Ù…', flag: 'ğŸ‡²ğŸ‡¦', rate: 10.1 },
                EGP: { name: 'Egyptian Pound', symbol: 'Ø¬.Ù…', flag: 'ğŸ‡ªğŸ‡¬', rate: 30.9 },
                TRY: { name: 'Turkish Lira', symbol: 'â‚º', flag: 'ğŸ‡¹ğŸ‡·', rate: 28.5 },
                GBP: { name: 'British Pound', symbol: 'Â£', flag: 'ğŸ‡¬ğŸ‡§', rate: 0.79 }
            },
            
            countries: {
                DZ: { name: 'Algeria', nameAr: 'Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±', currency: 'DZD', flag: 'ğŸ‡©ğŸ‡¿', vat: 19 },
                SA: { name: 'Saudi Arabia', nameAr: 'Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©', currency: 'SAR', flag: 'ğŸ‡¸ğŸ‡¦', vat: 15 },
                AE: { name: 'UAE', nameAr: 'Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª', currency: 'AED', flag: 'ğŸ‡¦ğŸ‡ª', vat: 5 },
                EG: { name: 'Egypt', nameAr: 'Ù…ØµØ±', currency: 'EGP', flag: 'ğŸ‡ªğŸ‡¬', vat: 14 },
                MA: { name: 'Morocco', nameAr: 'Ø§Ù„Ù…ØºØ±Ø¨', currency: 'MAD', flag: 'ğŸ‡²ğŸ‡¦', vat: 20 },
                US: { name: 'United States', nameAr: 'Ø£Ù…Ø±ÙŠÙƒØ§', currency: 'USD', flag: 'ğŸ‡ºğŸ‡¸', vat: 0 },
                TR: { name: 'Turkey', nameAr: 'ØªØ±ÙƒÙŠØ§', currency: 'TRY', flag: 'ğŸ‡¹ğŸ‡·', vat: 18 }
            }
        };

        // ==================== STATE ====================
        
        let state = {
            language: localStorage.getItem('lang') || 'ar',
            currency: localStorage.getItem('currency') || 'DZD',
            country: localStorage.getItem('country') || 'DZ',
            user: JSON.parse(localStorage.getItem('user')) || null,
            cart: JSON.parse(localStorage.getItem('cart')) || [],
            view: 'home', // home, admin, seller, product, cart, checkout
            adminTab: 'dashboard' // dashboard, products, orders, users, analytics
        };

        // ==================== TRANSLATIONS ====================
        
        const i18n = {
            ar: {
                home: 'Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©', admin: 'Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…', seller: 'Ù„ÙˆØ­Ø© Ø§Ù„Ø¨Ø§Ø¦Ø¹',
                products: 'Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª', orders: 'Ø§Ù„Ø·Ù„Ø¨Ø§Øª', users: 'Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†',
                analytics: 'Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª', settings: 'Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª', logout: 'ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬',
                addProduct: 'Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬', totalSales: 'Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª',
                totalOrders: 'Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø¨Ø§Øª', totalUsers: 'Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†',
                revenue: 'Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª', pending: 'Ù…Ø¹Ù„Ù‚', completed: 'Ù…ÙƒØªÙ…Ù„',
                cancelled: 'Ù…Ù„ØºÙŠ', inStock: 'Ù…ØªÙˆÙØ±', outOfStock: 'ØºÙŠØ± Ù…ØªÙˆÙØ±',
                price: 'Ø§Ù„Ø³Ø¹Ø±', category: 'Ø§Ù„ÙØ¦Ø©', actions: 'Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª',
                edit: 'ØªØ¹Ø¯ÙŠÙ„', delete: 'Ø­Ø°Ù', view: 'Ø¹Ø±Ø¶', save: 'Ø­ÙØ¸',
                cancel: 'Ø¥Ù„ØºØ§Ø¡', confirm: 'ØªØ£ÙƒÙŠØ¯', search: 'Ø¨Ø­Ø«',
                filter: 'ØªØµÙÙŠØ©', export: 'ØªØµØ¯ÙŠØ±', import: 'Ø§Ø³ØªÙŠØ±Ø§Ø¯',
                language: 'Ø§Ù„Ù„ØºØ©', currency: 'Ø§Ù„Ø¹Ù…Ù„Ø©', country: 'Ø§Ù„Ø¯ÙˆÙ„Ø©',
                welcome: 'Ù…Ø±Ø­Ø¨Ø§Ù‹', dashboard: 'Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…', overview: 'Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©',
                recentOrders: 'Ø£Ø­Ø¯Ø« Ø§Ù„Ø·Ù„Ø¨Ø§Øª', topProducts: 'Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø£ÙƒØ«Ø± Ù…Ø¨ÙŠØ¹Ø§Ù‹',
                lowStock: 'Ù…Ø®Ø²ÙˆÙ† Ù…Ù†Ø®ÙØ¶', reviews: 'Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª'
            },
            en: {
                home: 'Home', admin: 'Admin Panel', seller: 'Seller Panel',
                products: 'Products', orders: 'Orders', users: 'Users',
                analytics: 'Analytics', settings: 'Settings', logout: 'Logout',
                addProduct: 'Add Product', totalSales: 'Total Sales',
                totalOrders: 'Total Orders', totalUsers: 'Total Users',
                revenue: 'Revenue', pending: 'Pending', completed: 'Completed',
                cancelled: 'Cancelled', inStock: 'In Stock', outOfStock: 'Out of Stock',
                price: 'Price', category: 'Category', actions: 'Actions',
                edit: 'Edit', delete: 'Delete', view: 'View', save: 'Save',
                cancel: 'Cancel', confirm: 'Confirm', search: 'Search',
                filter: 'Filter', export: 'Export', import: 'Import',
                language: 'Language', currency: 'Currency', country: 'Country',
                welcome: 'Welcome', dashboard: 'Dashboard', overview: 'Overview',
                recentOrders: 'Recent Orders', topProducts: 'Top Products',
                lowStock: 'Low Stock', reviews: 'Reviews'
            }
        };

        // ==================== MOCK DATA ====================
        
        const mockData = {
            products: [
                { id: 1, name: 'iPhone 15 Pro', nameAr: 'Ø¢ÙŠÙÙˆÙ† 15 Ø¨Ø±Ùˆ', price: 1199, stock: 15, category: 'electronics', sales: 234, image: 'https://images.unsplash.com/photo-1696446701796-da61225697cc?w=400' },
                { id: 2, name: 'Samsung S24', nameAr: 'Ø³Ø§Ù…Ø³ÙˆÙ†Ø¬ Ø¥Ø³ 24', price: 999, stock: 8, category: 'electronics', sales: 189, image: 'https://images.unsplash.com/photo-1610945265078-3858a0828671?w=400' },
                { id: 3, name: 'Nike Air Max', nameAr: 'Ù†Ø§ÙŠÙƒ Ø¢ÙŠØ± Ù…Ø§ÙƒØ³', price: 189, stock: 45, category: 'fashion', sales: 567, image: 'https://images.unsplash.com/photo-1542291026-7eec264c27ff?w=400' },
                { id: 4, name: 'MacBook
